# @alicloud/gatsby-theme-console-doc

è¿™æ˜¯ä¸€ä¸ª gatsby çš„ [theme](https://www.gatsbyjs.org/docs/themes/)ï¼Œç”¨äºç”Ÿæˆæ–‡æ¡£ç«™ç‚¹ã€‚å®ƒå·²ç»åšäº†æŠ½è±¡ï¼Œå¯ä»¥ç”¨äºç”Ÿæˆé€šç”¨çš„æ–‡æ¡£ç«™ç‚¹ï¼Œä¸ä»…é™äº console-componentsã€‚

> äº‹å®ä¸Šï¼Œå®ƒå·²ç»è¢«ç”¨äº[å…¶ä»–æ–‡æ¡£ç«™ç‚¹](https://aliyun.github.io/alibabacloud-console-chart/guides/quick-start)çš„ç”Ÿæˆã€‚

## å¦‚ä½•ä½¿ç”¨

[è¿™ä¸ªç›®å½•](https://github.com/aliyun/alibabacloud-console-components/tree/master/demo-workspaces/gatsby-theme-console-doc-template)æ˜¯ä¸€ä¸ªæœ€å°çš„ä½¿ç”¨ç¤ºä¾‹é¡¹ç›®ã€‚å…¶ä¸­çš„[gatsby-config.js é…ç½®æ–‡ä»¶](https://github.com/aliyun/alibabacloud-console-components/tree/master/demo-workspaces/gatsby-theme-console-doc-template/site/gatsby-config.js)åŒ…å«äº†è¯¦ç»†é…ç½®ç¤ºä¾‹å’Œè¯´æ˜ã€‚

## ç«™ç‚¹èƒ½åŠ›

- ç»§æ‰¿è‡ª gatsby çš„é«˜æ€§èƒ½ï¼šSSRã€prefetching
- è§„èŒƒçš„ç«™ç‚¹å¸ƒå±€ï¼Œæ¸…çˆ½çš„æ ·å¼é£æ ¼
- ç±» github é£æ ¼çš„ markdown æ¸²æŸ“æ ·å¼
- è‡ªåŠ¨ç”Ÿæˆæœç´¢åŠŸèƒ½ï¼Œæ‰€æœ‰æ–‡æ¡£éƒ½æ˜¯å¯æœç´¢çš„ï¼Œå¼€ç®±å³ç”¨
- æ–‡æ¡£æ ‡ç­¾ã€‚å¹¶ä¸”å¯ä»¥é€šè¿‡æ ‡ç­¾æ¥æœç´¢æ–‡æ¡£ã€å‘ç”¨æˆ·æ¨èå…¶ä»–æ–‡æ¡£ã€‚æ ‡ç­¾è¿˜ç”¨äºç¼–æ’å·¦ä¾§å¯¼èˆªæ 
- å¯ç¼–æ’çš„å·¦ä¾§å¯¼èˆªæ 
- åŠ¨æ€åŠ è½½æ–‡æ¡£ã€‚åŠ¨æ€æ–‡æ¡£æ›´æ–°åï¼Œæ–‡æ¡£ç«™ç‚¹æ— éœ€é‡æ–°æ„å»ºå‘å¸ƒ

ä»¥åŠæ–‡æ¡£ç²’åº¦çš„ä¼˜åŒ–æ‰©å±•ï¼š

- åœ¨ markdown ä¸­åµŒå…¥æœ¬åœ°çš„å›¾ç‰‡ã€‚å›¾ç‰‡ä¼šè¢«è‡ªåŠ¨ä¼˜åŒ–
- å¯åœ¨æ–‡æ¡£ä¸­åµŒå…¥ demoï¼Œå¹¶è‡ªåŠ¨ç”Ÿæˆâ€œåœ¨ codesandbox æ‰“å¼€â€çš„åŠŸèƒ½
- å¯åœ¨æ–‡æ¡£ä¸­æ¸²æŸ“æ¥è‡ªæºç çš„ typescript interfaceï¼ˆæ¸²æŸ“æˆä¸€ä¸ªè¡¨æ ¼ï¼‰ï¼Œä½œä¸º API æ–‡æ¡£ï¼Œå¹¶æå–æ³¨é‡Šä½œä¸º API æè¿°ã€‚é¿å…æ‰‹åŠ¨å°† API ç»´æŠ¤åœ¨ markdown ä¸­ï¼Œé€ æˆæ–‡æ¡£è…åŒ–
- è‡ªåŠ¨ç”Ÿæˆæ ‡é¢˜è·³è½¬é”šç‚¹ã€æ–‡æ¡£ç›®å½•ç»“æ„

æœ‰å…³æ–‡æ¡£ç²’åº¦çš„ä¼˜åŒ–æ‰©å±•çš„è¯¦ç»†è¯´æ˜ï¼Œè¯·æŸ¥çœ‹ ğŸ‘‰[æ–‡æ¡£ç‰¹æ€§](./doc-features)ã€‚æœ¬æ–‡æ¡£åªé˜è¿°è·¨æ–‡æ¡£çš„ã€ç«™ç‚¹ç²’åº¦çš„é‡è¦ç‰¹æ€§ã€‚

## æ–‡æ¡£æœç´¢

ä½¿ç”¨è€…åœ¨ä½¿ç”¨`@alicloud/gatsby-theme-console-doc`æ­å»ºæ–‡æ¡£ç«™ç‚¹çš„æ—¶å€™ï¼Œéœ€è¦é€šè¿‡é…ç½®çš„æ–¹å¼æ¥å‘Šè¯‰æ–‡æ¡£æ¡†æ¶ï¼šæœ‰å“ªäº›æ–‡æ¡£ã€ä»–ä»¬æ”¾åœ¨å“ªé‡Œã€æ–‡æ¡£çš„åç§°ã€url è·¯å¾„ã€æ–‡æ¡£æ ‡ç­¾ç­‰ï¼Œè¿™äº›æ•°æ®æ˜¯æ–‡æ¡£çš„å…ƒæ•°æ®ï¼ˆæè¿°æ–‡æ¡£ï¼Œä½†ä¸åŒ…å«æ–‡æ¡£å†…å®¹æœ¬èº«ï¼‰ã€‚
æ–‡æ¡£ç«™ç‚¹åœ¨æ„å»ºæ—¶ä¼šæ”¶é›†æ‰€æœ‰æ–‡æ¡£çš„å…ƒæ•°æ®ã€‚è¿™äº›æ•°æ®ä¼šè¢«ç”¨æ¥ä½œä¸ºæœç´¢çš„æ•°æ®ã€‚

æ–‡æ¡£æœç´¢ä¼šæ ¹æ®åç§°å’Œæ ‡ç­¾é”®å€¼æ¥æœç´¢:

- æœç´¢è¯`democ`ä¼šåŒ¹é…åˆ°åç§°ä¸º`rc-demo-component`çš„æ–‡æ¡£
- æœç´¢è¯`ç»„ä»¶`ä¼šåŒ¹é…åˆ°ä¸­æ–‡åç§°ä¸º`ç»„ä»¶1`çš„æ–‡æ¡£
- æœç´¢è¯`basec`ä¼šåŒ¹é…åˆ°åŒ…å«æ ‡ç­¾`baseComp`çš„æ–‡æ¡£
- æœç´¢è¯`test:val`ä¼šåŒ¹é…åˆ°åŒ…å«æ ‡ç­¾`testTag2:tagVal2`çš„æ–‡æ¡£

## æ–‡æ¡£æ ‡ç­¾

### èƒŒæ™¯

è¿‡å»ï¼Œæ–‡æ¡£æ¡†æ¶å¯¹æ–‡æ¡£è¿›è¡Œåˆ†ç±»çš„æŒ‡æ ‡åªæœ‰ä¸€ä¸ªï¼šcategory ç±»åˆ«ã€‚ä¸€ä¸ªç±»åˆ«å°±ç›¸å½“äºä¸€ä¸ªæ¡¶ï¼Œæ¯ç¯‡æ–‡æ¡£åªèƒ½æ”¾åœ¨ä¸€ä¸ªæ¡¶é‡Œé¢ã€‚

> å› ä¸ºæˆ‘ä»¬æ‹¼æ¥æ–‡æ¡£ url çš„è§„èŒƒï¼š`/<category>/<æ–‡æ¡£åç§°>`ï¼Œæ‰€ä»¥æ¯ç¯‡æ–‡æ¡£æ³¨å®šåªèƒ½æœ‰ä¸€ç§ category

è¿™ç§å•ä¸€çš„åˆ†ç±»ç»´åº¦ï¼Œå¯¹æ–‡æ¡£çš„å…³è”å’Œåˆ†ç±»é€ æˆäº†å›°éš¾ã€‚æ¯”å¦‚ï¼Œconsole-components è¿‡å»åªæœ‰ä¸¤ç§ categoryï¼šåŸºç¡€ç»„ä»¶å’Œä¸šåŠ¡ç»„ä»¶ã€‚è¿™ç§åˆ†ç±»æ— æ³•ä½“ç°ç»„ä»¶ä¹‹é—´**åœ¨åŠŸèƒ½ä¸Šçš„å…³è”æ€§**ã€‚æ¯”å¦‚ï¼Œ`Button`å’Œ`MenuButton`éƒ½å±äºåŸºç¡€ç»„ä»¶ï¼Œç„¶è€ŒåŸºç¡€ç»„ä»¶å¤šè¾¾ 50 ä¸ªï¼Œ**æ–‡æ¡£ç«™ç‚¹å¯¹è¿™ 50 ä¸ªåŸºç¡€ç»„ä»¶ä¸€è§†åŒä»ï¼Œæ²¡èƒ½ä½“ç°è¿™ä¸¤ä¸ªç»„ä»¶ä¹‹é—´çš„å¯†åˆ‡ç›¸ä¼¼æ€§ï¼Œç»™ç”¨æˆ·çš„å­¦ä¹ å’ŒæŸ¥æ‰¾é€ æˆäº†å›°éš¾**ã€‚

è¿™ä¸¤ç§ç»„ä»¶å®é™…ä¸Šåœ¨åŠŸèƒ½ä¸Šæ˜¯éå¸¸ç›¸å…³çš„ï¼šéƒ½æ˜¯ä¸€ç§â€œbuttonâ€ã€‚**å¦‚æœæˆ‘ä»¬çš„æ–‡æ¡£ç«™ç‚¹èƒ½å¤Ÿä½“ç°è¿™ç§å…³è”æ€§ï¼Œé‚£ä¹ˆç”¨æˆ·åœ¨é˜…è¯»æ–‡æ¡£çš„æ—¶å€™ï¼Œèƒ½å¤Ÿå¾ˆå¿«åœ°æ‰¾åˆ°ä¸æ­¤ç›¸å…³çš„æ–‡æ¡£ï¼Œä¸€å¹¶å­¦ä¹ å’Œæ¯”è¾ƒã€‚**

ä¸ºæ­¤ï¼Œæ–‡æ¡£æ¡†æ¶æ”¯æŒ tag çš„å…³è”æ¨¡å¼ï¼Œå°†æ–‡æ¡£é€šè¿‡ tag å…³è”èµ·æ¥ä»¥åï¼Œ**ç›¸å…³çš„æ–‡æ¡£èƒ½å¤Ÿé è¿‘å±•ç¤ºã€ç›¸äº’å¼•èï¼Œç”¨æˆ·ä¸å†çœ‹åˆ°ä¸€ä¸ªä¸ªå­¤ç«‹çš„ç»„ä»¶ï¼Œè€Œæ˜¯ä¸€ä¸ªä¸ªæ—ç¾¤**ã€‚

### åŠŸèƒ½è®¾è®¡

- tag æœ¬è´¨ä¸Šæ˜¯ attach åœ¨æ–‡æ¡£å®ä½“ä¸Šçš„ key:value å¯¹ï¼ˆå¯ä»¥çœç•¥ valueï¼Œç­‰ä»·äº key:trueï¼‰ã€‚
- æ¯ç¯‡æ–‡æ¡£å¯ä»¥ attach ä»»æ„å¤šä¸ª tagï¼ˆkey:value å¯¹ï¼‰ã€‚
- tag æ˜¯ç«™ç‚¹å¯¹äºæ–‡æ¡£çš„åˆ†ç±»ä¸ç¼–æ’ï¼ŒåŒä¸€ç¯‡æ–‡æ¡£åœ¨ä¸åŒçš„ç«™ç‚¹å¯èƒ½æœ‰ä¸åŒçš„ tagï¼Œå› æ­¤ tag ä¿¡æ¯ä¸å±äºæ–‡æ¡£æœ¬èº«ï¼ˆä¸åº”è¯¥åœ¨æ–‡æ¡£å¼€å¤´æ ‡æ³¨ tagï¼‰ï¼Œè€Œæ˜¯å±äºç«™ç‚¹çš„ä¸€ç§é…ç½®ã€‚
- æ–‡æ¡£ç«™ç‚¹è¦æ‹¿åˆ°æ‰€æœ‰æ–‡æ¡£çš„ tag ä¿¡æ¯ï¼Œæ‰èƒ½æ¸²æŸ“å·¦ä¾§å¯¼èˆªæ ã€æ¿€æ´»æœç´¢åŠŸèƒ½ã€‚å› æ­¤ tag ä¿¡æ¯å¤„äºç«™ç‚¹æ¸²æŸ“çš„å…³é”®è·¯å¾„ä¸Šã€‚æˆ‘ä»¬åº”è¯¥å°†è¿™äº›ä¿¡æ¯æ‰“åŒ…åˆ°é¦–å± bundleã€‚

### åŠŸèƒ½ 1ï¼šå¸®åŠ©é˜…è¯»è€…ç†è§£æ–‡æ¡£å…³ç³»

æ ‡ç­¾ä¼šå±•ç¤ºåœ¨æ–‡æ¡£é¡¶éƒ¨ï¼Œæç¤ºæ–‡æ¡£å†…å®¹çš„å…³é”®ä¿¡æ¯ã€‚

![tag hint](./assets/tag1.png 'æ–‡æ¡£æ ‡ç­¾æ ‡æ³¨')

ç‚¹å‡»æ–‡æ¡£é¡¶éƒ¨çš„æ ‡ç­¾ï¼Œèƒ½ç«‹å³çœ‹åˆ°ç›¸åŒæ ‡ç­¾çš„å…¶ä»–æ–‡æ¡£ï¼Œä¾¿äºç”¨æˆ·åšåˆ†ç±»ã€å­¦ä¹ ã€æ¯”è¾ƒï¼›

![tag search](./assets/tag2.png 'æœç´¢ç›¸åŒæ ‡ç­¾çš„æ–‡æ¡£')

åç»­æˆ‘ä»¬ä¼šåœ¨æ–‡æ¡£å³ä¸‹è§’æ¨èæ ‡ç­¾ç›¸åŒçš„å…¶ä»–æ–‡æ¡£ï¼Œå¸®åŠ©è¯»è€…å¿«é€Ÿè§¦è¾¾ç›¸å…³çš„æ–‡æ¡£ã€‚

### åŠŸèƒ½ 2ï¼šå¸®åŠ©å¼€å‘è€…ç¼–æ’èœå•

å¼€å‘è€…åœ¨é…ç½®æ–‡æ¡£ç«™ç‚¹æ—¶ï¼Œå¯ä»¥é€šè¿‡æ ‡ç­¾æ¥ç¼–æ’å·¦ä¾§å¯¼èˆªèœå•ã€‚
ä»¥ä¸‹ç¤ºä¾‹æ¥è‡ª[ç¤ºä¾‹é¡¹ç›®](https://github.com/aliyun/alibabacloud-console-components/tree/master/demo-workspaces/gatsby-theme-console-doc-template/site/gatsby-config.js)ï¼Œé€šè¿‡æ ‡ç­¾æ¥é€‰ä¸­è‹¥å¹²æ–‡æ¡£ï¼Œç„¶åå°†å®ƒä»¬æ”¾åœ¨èœå•ä¸­ç›¸é‚»çš„ä½ç½®ã€‚

```js
// å·¦ä¾§å¯¼èˆªæ ç¼–æ’
const navCategories = (() => {
  switch (pageMeta.category) {
    // æ ¹æ®å½“å‰é¡µé¢çš„ä¿¡æ¯ï¼Œæ¥å†³å®šå·¦ä¾§å¯¼èˆªæ åº”è¯¥å±•ç¤ºå“ªäº›å¯¼èˆªé¡¹
    case 'components':
      // å¦‚æœå½“å‰é¡µé¢æ˜¯ç»„ä»¶
      // åˆ™å¯¼èˆªæ éœ€è¦å¯¼èˆªè¿™ä¸‹é¢é€‰ä¸­çš„æ–‡æ¡£ï¼š
      return [
        {
          // é€‰ä¸­é‚£äº›å…·æœ‰tag"è‡ªå®šä¹‰ç±»ç›®1"çš„æ–‡æ¡£
          tagSelector: {
            è‡ªå®šä¹‰ç±»ç›®1: true, // trueåŒ¹é…ä»»ä½•tagValue
            // è‡ªå®šä¹‰ç±»ç›®1: 'myvalue',  // åªåŒ¹é…å…·æœ‰tag"è‡ªå®šä¹‰ç±»ç›®1:myvalue"çš„æ–‡æ¡£
          },
          // å°†é€‰ä¸­çš„æ–‡æ¡£ç›´æ¥æ”¾åœ¨menuä¸­ï¼Œè¿˜æ˜¯æ”¾åœ¨ä¸€ä¸ªå¯å±•å¼€/æ”¶èµ·çš„SubMenuä¸­
          flat: true,
          /**
           * æ ¹æ®æ–‡æ¡£çš„tagå€¼æ¥æ’åºã€‚æ²¡æœ‰å¯¹åº”tagçš„æ–‡æ¡£ï¼Œä¼˜å…ˆçº§é»˜è®¤ä¸º1ã€‚
           * ä¾‹å­ï¼š
           * æ–‡æ¡£1æœ‰tagï¼š_è‡ªå®šä¹‰ç±»ç›®sort:2,
           * æ–‡æ¡£2æœ‰tagï¼š_è‡ªå®šä¹‰ç±»ç›®sort:0,
           * æ–‡æ¡£3æ²¡æœ‰tagã€‚
           * é‚£ä¹ˆåœ¨å¯¼èˆªèœå•ä¸­çš„é¡ºåºä¸º[æ–‡æ¡£2ï¼Œæ–‡æ¡£3ï¼Œæ–‡æ¡£1]
           */
          sortByTag: '_è‡ªå®šä¹‰ç±»ç›®sort',
        },
        {
          tagSelector: {
            baseComp: true,
          },
          // å°†é€‰ä¸­çš„æ–‡æ¡£æ”¾åœ¨ä¸€ä¸ªSubMenuä¸­ï¼Œå¯ä»¥æŒ‡å®šè¿™ä¸ªSubMenuçš„label
          // ä»…å½“flatä¸ä¸ºtrueæ—¶æœ‰æ•ˆ
          label: 'åŸºç¡€ç»„ä»¶',
        },
      ]
    case 'guides':
      // ä¹Ÿå¯ä»¥é€‰ä¸­æŒ‡å®šcategoryçš„æ–‡æ¡£
      return [{ categoryName: 'guides' }]
    default:
      throw new Error(`unexpected pageMeta.category ${pageMeta.category}`)
  }
})()
```

å¾—åˆ°çš„å¯¼èˆªèœå•å¦‚ä¸‹ï¼š
![nav-menu](./assets/nav-menu.png 'å¯¼èˆªèœå•ç¼–æ’')

æœªæ¥å…è®¸å¼€å‘è€…é€šè¿‡æ ‡ç­¾æ¥ç¼–æ’ç«™ç‚¹ç›®å½•ï¼ˆç«™ç‚¹åœ°å›¾ï¼‰ã€‚

## åŠ¨æ€åŠ è½½æ–‡æ¡£
